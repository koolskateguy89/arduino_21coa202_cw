<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="648px" preserveAspectRatio="none" style="width:880px;height:648px;background:#FFFFFF;" version="1.1" viewBox="0 0 880 648" width="880px" zoomAndPan="magnify"><defs/><g><g id="INITIALISATION"><rect fill="#F1F1F1" height="52.5938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="126" x="229.4086" y="7"/><line style="stroke:#181818;stroke-width:0.5;" x1="229.4086" x2="355.4086" y1="33.2969" y2="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="239.4086" y="24.9951">INITIALISATION</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="234.4086" y="51.292">initialise stuff</text></g><g id="SYNCHRONISATION"><rect fill="#F1F1F1" height="68.8906" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="161" x="211.9086" y="121"/><line style="stroke:#181818;stroke-width:0.5;" x1="211.9086" x2="372.9086" y1="147.2969" y2="147.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="224.4086" y="138.9951">SYNCHRONISATION</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137" x="216.9086" y="165.292">send 'Q' over Serial</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="216.9086" y="181.5889">once per second</text></g><g id="AFTER_SYNC"><rect fill="#F1F1F1" height="68.8906" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="205" x="189.9086" y="267"/><line style="stroke:#181818;stroke-width:0.5;" x1="189.9086" x2="394.9086" y1="293.2969" y2="293.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="246.9086" y="284.9951">AFTER_SYNC</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="181" x="194.9086" y="311.292">send list of implemented</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="158" x="194.9086" y="327.5889">extensions over Serial</text></g><g id="MAIN_LOOP"><rect fill="#F1F1F1" height="85.1875" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="224" x="180.4086" y="397"/><line style="stroke:#181818;stroke-width:0.5;" x1="180.4086" x2="404.4086" y1="423.2969" y2="423.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="251.4086" y="414.9951">MAIN_LOOP</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="185.4086" y="441.292">display channels</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="200" x="185.4086" y="457.5889">process incoming messages</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152" x="185.4086" y="473.8857">wait for button press</text></g><g id="SELECT_HELD"><rect fill="#F1F1F1" height="68.8906" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="211" x="565.9086" y="405"/><line style="stroke:#181818;stroke-width:0.5;" x1="565.9086" x2="776.9086" y1="431.2969" y2="431.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="621.9086" y="422.9951">SELECT_HELD</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="191" x="570.9086" y="449.292">wait for SELECT to be held</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="570.9086" y="465.5889">for 1s or released</text></g><g id="SELECT_AWAITING_RELEASE"><rect fill="#F1F1F1" height="68.8906" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="262" x="442.4086" y="574"/><line style="stroke:#181818;stroke-width:0.5;" x1="442.4086" x2="704.4086" y1="600.2969" y2="600.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="204" x="471.4086" y="591.9951">SELECT_AWAITING_RELEASE</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="242" x="447.4086" y="618.292">display student ID &amp; free memory</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="221" x="447.4086" y="634.5889">wait for SELECT to be released</text></g><g id="BUTTON_PRESSED"><rect fill="#F1F1F1" height="52.5938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="237" x="80.9086" y="582"/><line style="stroke:#181818;stroke-width:0.5;" x1="80.9086" x2="317.9086" y1="608.2969" y2="608.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="133.9086" y="599.9951">BUTTON_PRESSED</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="217" x="85.9086" y="626.292">wait for button to be released</text></g><ellipse cx="184.4086" cy="33.5" fill="#222222" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><!--MD5=[3ec12403bae093b1723f4bc08d98626c]
link *start to INITIALISATION--><g id="link_*start_INITIALISATION"><path d="M194.5336,33.5 C204.4096,33.5 214.2846,33.5 224.1606,33.5 " fill="none" id="*start-to-INITIALISATION" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="229.3256,33.5,220.3256,29.5,224.3256,33.5,220.3256,37.5,229.3256,33.5" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[5fb86aa279547df1f96dd838cf058114]
link INITIALISATION to SYNCHRONISATION--><g id="link_INITIALISATION_SYNCHRONISATION"><path d="M292.4086,60.243 C292.4086,76.358 292.4086,97.431 292.4086,115.564 " fill="none" id="INITIALISATION-to-SYNCHRONISATION" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="292.4086,120.594,296.4086,111.594,292.4086,115.594,288.4086,111.594,292.4086,120.594" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[66c3b284a6f34ffde8bc8b852e94ae94]
link SYNCHRONISATION to SYNCHRONISATION--><g id="link_SYNCHRONISATION_SYNCHRONISATION"><path d="M373.1006,143.676 C393.0386,144.527 407.9086,148.469 407.9086,155.5 C407.9086,161.927 395.4846,165.772 378.1216,167.036 " fill="none" id="SYNCHRONISATION-to-SYNCHRONISATION" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="373.1006,167.324,382.3155,170.8005,378.0923,167.0368,381.856,162.8137,373.1006,167.324" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="413.9086" y="160.0669">timeout</text></g><!--MD5=[5fd8f6814702ef14bc24a5e169ba41ce]
link SYNCHRONISATION to AFTER_SYNC--><g id="link_SYNCHRONISATION_AFTER_SYNC"><path d="M292.4086,190.262 C292.4086,211.656 292.4086,239.397 292.4086,261.697 " fill="none" id="SYNCHRONISATION-to-AFTER_SYNC" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="292.4086,266.95,296.4086,257.95,292.4086,261.95,288.4086,257.95,292.4086,266.95" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="293.4086" y="233.0669">'X' received from Serial</text></g><!--MD5=[f52058913ae07df723de8f0f0d3b4471]
link AFTER_SYNC to MAIN_LOOP--><g id="link_AFTER_SYNC_MAIN_LOOP"><path d="M292.4086,336.118 C292.4086,352.799 292.4086,373.225 292.4086,391.433 " fill="none" id="AFTER_SYNC-to-MAIN_LOOP" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="292.4086,396.505,296.4086,387.505,292.4086,391.505,288.4086,387.505,292.4086,396.505" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[c126b1e4d7eab0d479381b674de68b74]
link MAIN_LOOP to SELECT_HELD--><g id="link_MAIN_LOOP_SELECT_HELD"><path d="M404.5826,439.5 C453.8586,439.5 511.5536,439.5 560.6636,439.5 " fill="none" id="MAIN_LOOP-to-SELECT_HELD" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="565.6926,439.5,556.6926,435.5,560.6926,439.5,556.6926,443.5,565.6926,439.5" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="433.6586" y="402.5669">SELECT pressed</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="15" x="477.6586" y="417.6997">---</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="426.6586" y="432.8325">store pressed time</text></g><!--MD5=[8b8b14d573a36e3ee028803093066248]
link MAIN_LOOP to BUTTON_PRESSED--><g id="link_MAIN_LOOP_BUTTON_PRESSED"><path d="M180.0636,457.179 C117.443,469.024 48.3386,487.237 29.4086,512 C6,542.622 37.0443,564.8966 78.7339,580.1913 " fill="none" id="MAIN_LOOP-to-BUTTON_PRESSED" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="83.5989,581.9286,76.4684,575.1348,78.8901,580.2471,73.7779,582.6688,83.5989,581.9286" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="224" x="30.4086" y="525.0669">UP, LEFT, DOWN, or RIGHT pressed</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="75.4086" y="540.1997">store pressed button</text></g><!--MD5=[06066d4354d0fa2248f6f57fe126373b]
link BUTTON_PRESSED to MAIN_LOOP--><g id="link_BUTTON_PRESSED_MAIN_LOOP"><path d="M228.6546,581.9083 C239.5506,571.1153 251.2416,557.8482 259.4086,544 C269.6546,526.627 277.0996,505.706 282.2946,487.234 " fill="none" id="BUTTON_PRESSED-to-MAIN_LOOP" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="283.7016,482.094,277.4676,489.7188,282.3817,486.9166,285.1838,491.8307,283.7016,482.094" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="274.4086" y="532.5669">stored button released</text></g><!--MD5=[537e4957c83a038500fc9a955fbd4364]
link SELECT_HELD to SELECT_HELD--><g id="link_SELECT_HELD_SELECT_HELD"><path d="M777.1026,426.623 C797.4726,428.141 811.9086,432.434 811.9086,439.5 C811.9086,445.959 799.8476,450.1 782.2176,451.924 " fill="none" id="SELECT_HELD-to-SELECT_HELD" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="777.1026,452.377,786.4206,455.5667,782.0831,451.9355,785.7143,447.598,777.1026,452.377" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="817.9086" y="444.0669">timeout</text></g><!--MD5=[1d3024749ed6c0735b8f63ff4645373f]
link SELECT_HELD to SELECT_AWAITING_RELEASE--><g id="link_SELECT_HELD_SELECT_AWAITING_RELEASE"><path d="M652.0706,474.13 C640.3706,494.409 625.1126,520.735 611.4086,544 C606.5676,552.2194 601.3376,561.0127 596.3516,569.3555 " fill="none" id="SELECT_HELD-to-SELECT_AWAITING_RELEASE" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="593.6116,573.9376,601.6648,568.2679,596.1786,569.6469,594.7996,564.1607,593.6116,573.9376" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="631.4086" y="532.5669">SELECT held for 1s</text></g><!--MD5=[a2324058b0dd4a5bd048c8319041bad3]
link SELECT_AWAITING_RELEASE to MAIN_LOOP--><g id="link_SELECT_AWAITING_RELEASE_MAIN_LOOP"><path d="M525.5566,573.9444 C497.9116,555.0229 462.2156,531.368 429.4086,512 C413.6756,502.712 396.6186,493.306 380.0556,484.502 " fill="none" id="SELECT_AWAITING_RELEASE-to-MAIN_LOOP" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="375.3986,482.035,381.4801,489.782,379.8172,484.375,385.2242,482.7122,375.3986,482.035" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="479.4086" y="532.5669">SELECT released</text></g><!--MD5=[f5225c739f2ae4d46b5e076568a754cc]
@startuml
hide empty description

INITIALISATION: initialise stuff
SYNCHRONISATION: send 'Q' over Serial \nonce per second
AFTER_SYNC: send list of implemented \nextensions over Serial
MAIN_LOOP: display channels \nprocess incoming messages \nwait for button press
SELECT_HELD: wait for SELECT to be held\nfor 1s or released
SELECT_AWAITING_RELEASE: display student ID & free memory\nwait for SELECT to be released
BUTTON_PRESSED: wait for button to be released

[*] -> INITIALISATION
INITIALISATION - -> SYNCHRONISATION
SYNCHRONISATION - -> SYNCHRONISATION: timeout
SYNCHRONISATION - -> AFTER_SYNC: 'X' received from Serial
AFTER_SYNC - -> MAIN_LOOP

MAIN_LOOP -right> SELECT_HELD: SELECT pressed\n- - -\n store pressed time
MAIN_LOOP -> BUTTON_PRESSED: UP, LEFT, DOWN, or RIGHT pressed\nstore pressed button

SELECT_HELD - -> SELECT_HELD: timeout
SELECT_HELD - -> SELECT_AWAITING_RELEASE: SELECT held for 1s
SELECT_AWAITING_RELEASE - -> MAIN_LOOP: SELECT released

BUTTON_PRESSED - -> MAIN_LOOP: stored button released
@enduml

PlantUML version 1.2022.4beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>