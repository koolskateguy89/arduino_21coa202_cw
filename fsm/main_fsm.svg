<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="648px" preserveAspectRatio="none" style="width:897px;height:648px;background:#FFFFFF;" version="1.1" viewBox="0 0 897 648" width="897px" zoomAndPan="magnify"><defs/><g><g id="INITIALISATION"><rect fill="#F1F1F1" height="52.5938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="126" x="227.5425" y="7"/><line style="stroke:#181818;stroke-width:0.5;" x1="227.5425" x2="353.5425" y1="33.2969" y2="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="237.5425" y="24.9951">INITIALISATION</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="232.5425" y="51.292">initialise stuff</text></g><g id="SYNCHRONISATION"><rect fill="#F1F1F1" height="68.8906" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="161" x="210.0425" y="121"/><line style="stroke:#181818;stroke-width:0.5;" x1="210.0425" x2="371.0425" y1="147.2969" y2="147.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="222.5425" y="138.9951">SYNCHRONISATION</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137" x="215.0425" y="165.292">send 'Q' over Serial</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="215.0425" y="181.5889">once per second</text></g><g id="AFTER_SYNC"><rect fill="#F1F1F1" height="68.8906" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="205" x="188.0425" y="267"/><line style="stroke:#181818;stroke-width:0.5;" x1="188.0425" x2="393.0425" y1="293.2969" y2="293.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="245.0425" y="284.9951">AFTER_SYNC</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="181" x="193.0425" y="311.292">send list of implemented</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="158" x="193.0425" y="327.5889">extensions over Serial</text></g><g id="MAIN_LOOP"><rect fill="#F1F1F1" height="85.1875" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="224" x="178.5425" y="397"/><line style="stroke:#181818;stroke-width:0.5;" x1="178.5425" x2="402.5425" y1="423.2969" y2="423.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="249.5425" y="414.9951">MAIN_LOOP</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="183.5425" y="441.292">display channels</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="200" x="183.5425" y="457.5889">process incoming messages</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152" x="183.5425" y="473.8857">wait for button press</text></g><g id="SELECT_HELD"><rect fill="#F1F1F1" height="68.8906" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="211" x="582.0425" y="405"/><line style="stroke:#181818;stroke-width:0.5;" x1="582.0425" x2="793.0425" y1="431.2969" y2="431.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="638.0425" y="422.9951">SELECT_HELD</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="191" x="587.0425" y="449.292">wait for SELECT to be held</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="587.0425" y="465.5889">for 1s or released</text></g><g id="SELECT_AWAITING_RELEASE"><rect fill="#F1F1F1" height="68.8906" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="262" x="448.5425" y="574"/><line style="stroke:#181818;stroke-width:0.5;" x1="448.5425" x2="710.5425" y1="600.2969" y2="600.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="204" x="477.5425" y="591.9951">SELECT_AWAITING_RELEASE</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="242" x="453.5425" y="618.292">display student ID &amp; free memory</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="221" x="453.5425" y="634.5889">wait for SELECT to be released</text></g><g id="BUTTON_PRESSED"><rect fill="#F1F1F1" height="52.5938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="237" x="84.0429" y="582"/><line style="stroke:#181818;stroke-width:0.5;" x1="84.0429" x2="321.0429" y1="608.2969" y2="608.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="137.0429" y="599.9951">BUTTON_PRESSED</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="217" x="89.0429" y="626.292">wait for button to be released</text></g><ellipse cx="182.5425" cy="33.5" fill="#222222" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><!--MD5=[3ec12403bae093b1723f4bc08d98626c]
link *start to INITIALISATION--><g id="link_*start_INITIALISATION"><path d="M192.6675,33.5 C202.5435,33.5 212.4195,33.5 222.2955,33.5 " fill="none" id="*start-to-INITIALISATION" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="227.4595,33.5,218.4595,29.5,222.4595,33.5,218.4595,37.5,227.4595,33.5" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[5fb86aa279547df1f96dd838cf058114]
link INITIALISATION to SYNCHRONISATION--><g id="link_INITIALISATION_SYNCHRONISATION"><path d="M290.5425,60.243 C290.5425,76.358 290.5425,97.431 290.5425,115.564 " fill="none" id="INITIALISATION-to-SYNCHRONISATION" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="290.5425,120.594,294.5425,111.594,290.5425,115.594,286.5425,111.594,290.5425,120.594" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[66c3b284a6f34ffde8bc8b852e94ae94]
link SYNCHRONISATION to SYNCHRONISATION--><g id="link_SYNCHRONISATION_SYNCHRONISATION"><path d="M371.2345,143.676 C391.1725,144.527 406.0425,148.469 406.0425,155.5 C406.0425,161.927 393.6185,165.772 376.2565,167.036 " fill="none" id="SYNCHRONISATION-to-SYNCHRONISATION" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="371.2345,167.324,380.4484,170.8031,376.2263,167.0383,379.9912,162.8162,371.2345,167.324" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="412.0425" y="160.0669">timeout</text></g><!--MD5=[5fd8f6814702ef14bc24a5e169ba41ce]
link SYNCHRONISATION to AFTER_SYNC--><g id="link_SYNCHRONISATION_AFTER_SYNC"><path d="M290.5425,190.262 C290.5425,211.656 290.5425,239.397 290.5425,261.697 " fill="none" id="SYNCHRONISATION-to-AFTER_SYNC" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="290.5425,266.95,294.5425,257.95,290.5425,261.95,286.5425,257.95,290.5425,266.95" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="291.5425" y="233.0669">'X' received from Serial</text></g><!--MD5=[f52058913ae07df723de8f0f0d3b4471]
link AFTER_SYNC to MAIN_LOOP--><g id="link_AFTER_SYNC_MAIN_LOOP"><path d="M290.5425,336.118 C290.5425,352.799 290.5425,373.225 290.5425,391.433 " fill="none" id="AFTER_SYNC-to-MAIN_LOOP" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="290.5425,396.505,294.5425,387.505,290.5425,391.505,286.5425,387.505,290.5425,396.505" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[77594d3d1788323dc001e3c87856301f]
link MAIN_LOOP to MAIN_LOOP--><g id="link_MAIN_LOOP_MAIN_LOOP"><path d="M402.7055,426.742 C423.1815,428.357 437.5425,432.609 437.5425,439.5 C437.5425,445.798 425.5435,449.893 407.8435,451.784 " fill="none" id="MAIN_LOOP-to-MAIN_LOOP" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="402.7055,452.258,412.0362,455.4103,407.6842,451.7966,411.2979,447.4445,402.7055,452.258" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[c126b1e4d7eab0d479381b674de68b74]
link MAIN_LOOP to SELECT_HELD--><g id="link_MAIN_LOOP_SELECT_HELD"><path d="M402.7155,439.5 C457.1365,439.5 522.3085,439.5 576.5705,439.5 " fill="none" id="MAIN_LOOP-to-SELECT_HELD" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="581.7865,439.5,572.7865,435.5,576.7865,439.5,572.7865,443.5,581.7865,439.5" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="440.7925" y="402.5669">SELECT pressed</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="15" x="484.7925" y="417.6997">---</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="433.7925" y="432.8325">store pressed time</text></g><!--MD5=[8b8b14d573a36e3ee028803093066248]
link MAIN_LOOP to BUTTON_PRESSED--><g id="link_MAIN_LOOP_BUTTON_PRESSED"><path d="M178.3345,457.426 C116.3745,469.315 48.2438,487.487 29.5429,512 C6,542.86 37.0573,565.0957 79.052,580.3029 " fill="none" id="MAIN_LOOP-to-BUTTON_PRESSED" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="83.9536,582.0299,76.7943,575.2664,79.2378,580.3683,74.1358,582.8118,83.9536,582.0299" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="224" x="30.5429" y="525.0669">UP, LEFT, DOWN, or RIGHT pressed</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="75.5429" y="540.1997">store pressed button</text></g><!--MD5=[06066d4354d0fa2248f6f57fe126373b]
link BUTTON_PRESSED to MAIN_LOOP--><g id="link_BUTTON_PRESSED_MAIN_LOOP"><path d="M230.4045,581.7506 C240.7665,570.9359 251.8595,557.6951 259.5425,544 C269.3155,526.58 276.3225,505.743 281.1725,487.347 " fill="none" id="BUTTON_PRESSED-to-MAIN_LOOP" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="282.4845,482.228,276.375,489.9529,281.2429,487.0714,284.1244,491.9394,282.4845,482.228" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="274.5425" y="532.5669">stored button released</text></g><!--MD5=[537e4957c83a038500fc9a955fbd4364]
link SELECT_HELD to SELECT_HELD--><g id="link_SELECT_HELD_SELECT_HELD"><path d="M793.2365,426.623 C813.6075,428.141 828.0425,432.434 828.0425,439.5 C828.0425,445.959 815.9815,450.1 798.3515,451.924 " fill="none" id="SELECT_HELD-to-SELECT_HELD" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="793.2365,452.377,802.5545,455.5667,798.217,451.9355,801.8482,447.598,793.2365,452.377" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="834.0425" y="444.0669">timeout</text></g><!--MD5=[1d3024749ed6c0735b8f63ff4645373f]
link SELECT_HELD to SELECT_AWAITING_RELEASE--><g id="link_SELECT_HELD_SELECT_AWAITING_RELEASE"><path d="M665.6875,474.295 C647.9015,501.797 622.8005,540.611 604.2795,569.2496 " fill="none" id="SELECT_HELD-to-SELECT_AWAITING_RELEASE" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="601.3655,573.7553,609.6117,568.3702,604.0807,569.5568,602.8941,564.0258,601.3655,573.7553" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="641.5425" y="532.5669">SELECT held for 1s</text></g><!--MD5=[a2324058b0dd4a5bd048c8319041bad3]
link SELECT_AWAITING_RELEASE to MAIN_LOOP--><g id="link_SELECT_AWAITING_RELEASE_MAIN_LOOP"><path d="M529.2265,573.8336 C500.4365,554.9855 463.4135,531.439 429.5425,512 C413.5155,502.801 396.1785,493.437 379.3635,484.647 " fill="none" id="SELECT_AWAITING_RELEASE-to-MAIN_LOOP" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="374.6365,482.183,380.7684,489.8901,379.0703,484.4942,384.4663,482.7961,374.6365,482.183" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="481.5425" y="532.5669">SELECT released</text></g><!--MD5=[82cdfbf342132793e4d26bfd73c21fc6]
@startuml
hide empty description

INITIALISATION: initialise stuff
SYNCHRONISATION: send 'Q' over Serial \nonce per second
AFTER_SYNC: send list of implemented \nextensions over Serial
MAIN_LOOP: display channels \nprocess incoming messages \nwait for button press
SELECT_HELD: wait for SELECT to be held\nfor 1s or released
SELECT_AWAITING_RELEASE: display student ID & free memory\nwait for SELECT to be released
BUTTON_PRESSED: wait for button to be released

[*] -> INITIALISATION
INITIALISATION - -> SYNCHRONISATION
SYNCHRONISATION - -> SYNCHRONISATION: timeout
SYNCHRONISATION - -> AFTER_SYNC: 'X' received from Serial
AFTER_SYNC - -> MAIN_LOOP

MAIN_LOOP - -> MAIN_LOOP

MAIN_LOOP -right> SELECT_HELD: SELECT pressed\n- - -\n store pressed time
MAIN_LOOP -> BUTTON_PRESSED: UP, LEFT, DOWN, or RIGHT pressed\nstore pressed button

SELECT_HELD - -> SELECT_HELD: timeout
SELECT_HELD - -> SELECT_AWAITING_RELEASE: SELECT held for 1s
SELECT_AWAITING_RELEASE - -> MAIN_LOOP: SELECT released

BUTTON_PRESSED - -> MAIN_LOOP: stored button released
@enduml

PlantUML version 1.2022.4beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>