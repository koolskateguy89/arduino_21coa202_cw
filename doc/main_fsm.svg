<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="857px" preserveAspectRatio="none" style="width:813px;height:857px;background:#FFFFFF;" version="1.1" viewBox="0 0 813 857" width="813px" zoomAndPan="magnify"><defs/><g><g id="INITIALISATION"><rect fill="#F1F1F1" height="68.8906" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="372" x="156.2223" y="7"/><line style="stroke:#181818;stroke-width:0.5;" x1="156.2223" x2="528.2223" y1="33.2969" y2="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="289.2223" y="24.9951">INITIALISATION</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="352" x="161.2223" y="51.292">set topChannel, Channel::headChannel to nullptr</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="293" x="161.2223" y="67.5889">set selectPressTime, pressedButton to 0</text></g><g id="SYNCHRONISATION"><rect fill="#F1F1F1" height="68.8906" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="157" x="263.7223" y="137"/><line style="stroke:#181818;stroke-width:0.5;" x1="263.7223" x2="420.7223" y1="163.2969" y2="163.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="274.2223" y="154.9951">SYNCHRONISATION</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137" x="268.7223" y="181.292">send 'Q' over Serial</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="268.7223" y="197.5889">once per second</text></g><g id="AFTER_SYNC"><rect fill="#F1F1F1" height="68.8906" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="201" x="241.7223" y="283"/><line style="stroke:#181818;stroke-width:0.5;" x1="241.7223" x2="442.7223" y1="309.2969" y2="309.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="296.7223" y="300.9951">AFTER_SYNC</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="181" x="246.7223" y="327.292">send list of implemented</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="158" x="246.7223" y="343.5889">extensions over Serial</text></g><g id="MAIN_LOOP"><rect fill="#F1F1F1" height="85.1875" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="220" x="232.2223" y="413"/><line style="stroke:#181818;stroke-width:0.5;" x1="232.2223" x2="452.2223" y1="439.2969" y2="439.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="301.2223" y="430.9951">MAIN_LOOP</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="237.2223" y="457.292">display channels</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="200" x="237.2223" y="473.5889">process incoming messages</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152" x="237.2223" y="489.8857">wait for button press</text></g><g id="SELECT_HELD"><rect fill="#F1F1F1" height="68.8906" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="211" x="87.7226" y="620"/><line style="stroke:#181818;stroke-width:0.5;" x1="87.7226" x2="298.7226" y1="646.2969" y2="646.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="143.7226" y="637.9951">SELECT_HELD</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="191" x="92.7226" y="664.292">wait for SELECT to be held</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="92.7226" y="680.5889">for 1s or released</text></g><g id="SELECT_AWAITING_RELEASE"><rect fill="#F1F1F1" height="85.1875" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="241" x="437.7223" y="766"/><line style="stroke:#181818;stroke-width:0.5;" x1="437.7223" x2="678.7223" y1="792.2969" y2="792.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="204" x="456.2223" y="783.9951">SELECT_AWAITING_RELEASE</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="442.7223" y="810.292">display student ID</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="200" x="442.7223" y="826.5889">process incoming messages</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="221" x="442.7223" y="842.8857">wait for SELECT to be released</text></g><g id="BUTTON_PRESSED"><rect fill="#F1F1F1" height="68.8906" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="288" x="352.2223" y="620"/><line style="stroke:#181818;stroke-width:0.5;" x1="352.2223" x2="640.2223" y1="646.2969" y2="646.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="430.7223" y="637.9951">BUTTON_PRESSED</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="268" x="357.2223" y="664.292">wait for stored button to be released</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="200" x="357.2223" y="680.5889">process incoming messages</text></g><ellipse cx="111.2223" cy="41.5" fill="#222222" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><!--MD5=[3ec12403bae093b1723f4bc08d98626c]
link *start to INITIALISATION--><g id="link_*start_INITIALISATION"><path d="M121.5993,41.5 C131.3843,41.5 141.1703,41.5 150.9553,41.5 " fill="none" id="*start-to-INITIALISATION" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="156.0723,41.5,147.0723,37.5,151.0723,41.5,147.0723,45.5,156.0723,41.5" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[5fb86aa279547df1f96dd838cf058114]
link INITIALISATION to SYNCHRONISATION--><g id="link_INITIALISATION_SYNCHRONISATION"><path d="M342.2223,76.13 C342.2223,93.046 342.2223,113.647 342.2223,131.28 " fill="none" id="INITIALISATION-to-SYNCHRONISATION" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="342.2223,136.65,346.2223,127.65,342.2223,131.65,338.2223,127.65,342.2223,136.65" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[5fd8f6814702ef14bc24a5e169ba41ce]
link SYNCHRONISATION to AFTER_SYNC--><g id="link_SYNCHRONISATION_AFTER_SYNC"><path d="M342.2223,206.262 C342.2223,227.656 342.2223,255.397 342.2223,277.697 " fill="none" id="SYNCHRONISATION-to-AFTER_SYNC" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="342.2223,282.95,346.2223,273.95,342.2223,277.95,338.2223,273.95,342.2223,282.95" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="343.2223" y="249.0669">'X' received from Serial</text></g><!--MD5=[f52058913ae07df723de8f0f0d3b4471]
link AFTER_SYNC to MAIN_LOOP--><g id="link_AFTER_SYNC_MAIN_LOOP"><path d="M342.2223,352.118 C342.2223,368.799 342.2223,389.225 342.2223,407.433 " fill="none" id="AFTER_SYNC-to-MAIN_LOOP" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="342.2223,412.505,346.2223,403.505,342.2223,407.505,338.2223,403.505,342.2223,412.505" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[c126b1e4d7eab0d479381b674de68b74]
link MAIN_LOOP to SELECT_HELD--><g id="link_MAIN_LOOP_SELECT_HELD"><path d="M232.1553,466.638 C150.6083,476.694 49.2956,495.436 23.2226,528 C6,549.51 7.5125,567.362 23.2226,590 C37.5362,610.626 59.4109,624.564 82.7525,633.979 " fill="none" id="MAIN_LOOP-to-SELECT_HELD" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="87.4385,635.802,80.5015,628.8108,82.7788,633.989,77.6006,636.2663,87.4385,635.802" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="33.2226" y="548.5669">SELECT pressed</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="15" x="79.2226" y="563.6997">---</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="28.2226" y="578.8325">store pressed time</text></g><!--MD5=[5194734bf9344961dcb31cf84b0d1e8a]
link SELECT_HELD to MAIN_LOOP--><g id="link_SELECT_HELD_MAIN_LOOP"><path d="M182.8423,619.878 C176.6403,592.924 172.9373,555.233 190.2223,528 C199.4993,513.385 212.6463,501.703 227.3693,492.38 " fill="none" id="SELECT_HELD-to-MAIN_LOOP" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="231.9873,489.562,222.2214,490.8372,227.7197,492.1672,226.3896,497.6654,231.9873,489.562" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="191.2223" y="563.5669">SELECT released</text></g><!--MD5=[8b8b14d573a36e3ee028803093066248]
link MAIN_LOOP to BUTTON_PRESSED--><g id="link_MAIN_LOOP_BUTTON_PRESSED"><path d="M329.5623,498.23 C323.6233,526.486 321.2723,563.378 339.2223,590 C346.4783,600.761 355.8993,609.699 366.5233,617.122 " fill="none" id="MAIN_LOOP-to-BUTTON_PRESSED" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="370.8153,619.999,365.5675,611.6647,366.6623,617.2146,361.1125,618.3095,370.8153,619.999" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="365.7223" y="541.0669">UP/DOWN pressed</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="357.7223" y="556.1997">store pressed button</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="15" x="419.2223" y="571.3325">---</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="340.2223" y="586.4653">change displayed channels</text></g><!--MD5=[06066d4354d0fa2248f6f57fe126373b]
link BUTTON_PRESSED to MAIN_LOOP--><g id="link_BUTTON_PRESSED_MAIN_LOOP"><path d="M514.4263,619.838 C526.2943,592.861 536.5033,555.159 518.2223,528 C503.6333,506.326 481.2203,491.219 457.2213,480.691 " fill="none" id="BUTTON_PRESSED-to-MAIN_LOOP" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="452.4023,478.645,459.1233,485.8442,457.0047,480.5991,462.2498,478.4804,452.4023,478.645" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="528.2223" y="563.5669">stored button released</text></g><!--MD5=[1d3024749ed6c0735b8f63ff4645373f]
link SELECT_HELD to SELECT_AWAITING_RELEASE--><g id="link_SELECT_HELD_SELECT_AWAITING_RELEASE"><path d="M273.7753,689.045 C326.6623,711.07 396.3683,740.098 453.5383,763.9053 " fill="none" id="SELECT_HELD-to-SELECT_AWAITING_RELEASE" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="458.3293,765.9006,451.5595,758.7473,453.7138,763.9779,448.4832,766.1321,458.3293,765.9006" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="376.2223" y="732.0669">SELECT held for 1s</text></g><!--MD5=[a2324058b0dd4a5bd048c8319041bad3]
link SELECT_AWAITING_RELEASE to MAIN_LOOP--><g id="link_SELECT_AWAITING_RELEASE_MAIN_LOOP"><path d="M602.5763,765.9259 C659.1373,707.885 742.8683,601.45 683.2223,528 C654.9493,493.183 545.0043,474.711 457.4963,465.33 " fill="none" id="SELECT_AWAITING_RELEASE-to-MAIN_LOOP" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="452.2943,464.78,460.8238,469.7043,457.2666,465.3058,461.6651,461.7486,452.2943,464.78" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="698.2223" y="659.0669">SELECT released</text></g><!--MD5=[5739f441574e455b3f867971cd304587]
@startuml
hide empty description

INITIALISATION: set topChannel, Channel::headChannel to nullptr\nset selectPressTime, pressedButton to 0
SYNCHRONISATION: send 'Q' over Serial\nonce per second
AFTER_SYNC: send list of implemented\nextensions over Serial
MAIN_LOOP: display channels\nprocess incoming messages\nwait for button press
SELECT_HELD: wait for SELECT to be held\nfor 1s or released
SELECT_AWAITING_RELEASE: display student ID\nprocess incoming messages\nwait for SELECT to be released
BUTTON_PRESSED: wait for stored button to be released\nprocess incoming messages

[*] -> INITIALISATION
INITIALISATION - -> SYNCHRONISATION
SYNCHRONISATION - -> AFTER_SYNC: 'X' received from Serial
AFTER_SYNC - -> MAIN_LOOP

MAIN_LOOP - -> SELECT_HELD: SELECT pressed \n- - -\n store pressed time
MAIN_LOOP - -> BUTTON_PRESSED: UP/DOWN pressed \nstore pressed button \n- - -\nchange displayed channels

SELECT_HELD - -> SELECT_AWAITING_RELEASE: SELECT held for 1s
SELECT_HELD - -> MAIN_LOOP: SELECT released
SELECT_AWAITING_RELEASE - -> MAIN_LOOP: SELECT released

BUTTON_PRESSED - -> MAIN_LOOP: stored button released
@enduml

PlantUML version 1.2022.4beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>